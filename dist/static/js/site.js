var simpleformsApp=angular.module("simpleformsApp",["ui.router"]);simpleformsApp.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"../static/partials/home.html"}).state("create_form",{url:"/create_form",templateUrl:"../static/partials/create_form.html"}).state("view_forms",{url:"/view_forms",templateUrl:"../static/partials/view_forms.html"}).state("view_response",{url:"/view_response/:responseId",templateUrl:"../static/partials/view_response.html"}).state("analyse_responses",{url:"/analyse_responses",templateUrl:"../static/partials/analyse_responses.html"}).state("create_response",{url:"/create_response/:formId",templateUrl:"../static/partials/create_response.html"})}]),simpleformsApp.controller("createresponseCtrl",["$scope","$http","$stateParams",function(e,t,s){t.get("/form/"+s.formId).then(function(t){e.form=t.data,e.response={},e.response.formId=e.form.id,e.response.answers=[];for(var s=e.form.questions,o=0;o<s.length;o++)if(e.response.answers[o]={},e.response.answers[o].questionId=s[o].id,"Check Box"===s[o].type){e.response.answers[o].textArray=[];for(var r=0;r<s[o].options.length;r++)e.response.answers[o].textArray.push("")}else e.response.answers[o].textArray=[""]},function(e){}),e.test=function(){console.log(e.response)},e.checkboxChange=function(t,s){""===e.response.answers[t].textArray[s]?e.response.answers[t].textArray[s]=e.form.questions[t].options[s].text:e.response.answers[t].textArray[s]=""},e.submitResponse=function(){t({method:"POST",url:"/submit_response",data:e.response,headers:{"Content-Type":"application/json"}}).success(function(e){console.log(e)})}}]),simpleformsApp.controller("viewresponseCtrl",["$scope","$http","$stateParams",function(e,t,s){t.get("/response/"+s.responseId).then(function(t){e.response=t.data},function(e){})}]),simpleformsApp.controller("viewformsCtrl",["$scope","$http",function(e,t){t.get("/forms").then(function(t){e.forms=t.data.forms},function(e){}),e.active_form=0,e.isActiveForm=function(t){return t===e.active_form},e.setActiveForm=function(t){e.active_form=t},e.deleteForm=function(s){t({method:"POST",url:"/delete_form/"+e.forms[s].id}).success(function(t){console.log(t),e.active_form=0,e.forms.splice(s,1)})}}]),simpleformsApp.controller("createformCtrl",["$scope","$http",function(e,t){e.form={title:"Untitled Form",description:"",questions:[{title:"",type:"Text",options:[]}]};var s=e.form.questions;e.questionTypes=["Text","Paragraph","Multiple Choice","Check Box","Dropdown"],e.changeQuestionType=function(t,o){s[t].type=e.questionTypes[o],"Text"===e.questionTypes[o]||"Paragraph"===e.questionTypes[o]?s[t].options=[]:s[t].options=[""]},e.addQuestion=function(){s.push({title:"",type:"Text",options:[]})},e.addQuestionAfter=function(e){s.splice(e+1,0,{title:"",type:"Text",options:[]})},e.removeQuestion=function(e){s.splice(e,1)},e.duplicateQuestion=function(e){var t=s[e],o={};o.title=t.title,o.type=t.type,o.options=t.options,s.splice(e+1,0,o)},e.addOption=function(e){s[e].options.push("")},e.removeOption=function(e,t){s[e].options.splice(t,1)},e.submitForm=function(){t({method:"POST",url:"/submit_form",data:e.form,headers:{"Content-Type":"application/json"}}).success(function(e){console.log(e)})}}]);